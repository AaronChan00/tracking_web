<!DOCTYPE html>
<html>
    <head>
      <title>Tracking Api</title>
      <script src="https://ajax.aspnetcdn.com/ajax/jQuery/jquery-3.6.0.js"></script>
    </head>
    <body>
      <h1>Bearer Token Authentication</h1>
      
      <p><button id="btnFetch">Click to send a Request</button></p>
      <script>
          document.addEventListener('DOMContentLoaded', () => {
              document.getElementById('btnFetch').addEventListener('click', sendReq);
              //pretend to get a token after logging in
              sessionStorage.setItem('MyUniqueUserToken',
                  JSON.stringify(
                      '91605f3fa45d787f65ed78c0f1f7f'
                      )
              );
          });
  
          let sendReq = (ev) => {
              let url = 'http://oms.gtschain.com/openapi/shipmenttrace/traceShipment' ;
              let token = JSON.parse(sessionStorage.getItem('MyUniqueUserToken'));
  
              let h = new Headers();
              h.append('Authorization', `Bearer ${token}`);
  
              let req = new Request(url, {
                  method: 'GET',
                  mode: 'cors',
                  headers: h
              });
              fetch(req)
                  .then(resp => resp.json())
                  .then(data => {
                      console.log(data[0]);
                  })
                  .catch(err => {
                      console.error(err.message);
                  })
          }
      </script>
    </body>
</html>